{% extends 'base.html' %}

{% block title %}–ó–∞–º–µ—Ç–∫–∞{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-lg border-0 rounded-3">
        <div class="card-body">
            <h2 class="card-title text-primary mb-3">–ó–∞–º–µ—Ç–∫–∞ #{{ note.id }}</h2>

            <ul class="list-inline text-muted small mb-3">
                <li class="list-inline-item">
                    üë§ –ê–≤—Ç–æ—Ä: <span class="fw-semibold">{{ note.author.username }}</span>
                </li>
                <li class="list-inline-item">
                    üóìÔ∏è –î–∞—Ç–∞: {{ note.created_at|date:"d.m.Y H:i" }}
                </li>
                <li class="list-inline-item">
                    üìå –°—Ç–∞—Ç—É—Å:
                    <span class="fw-semibold">
                        {{ note.status.name }}
                        {% if note.status.is_final %}
                            <span class="text-success ms-1">‚úÖ</span>
                        {% else %}
                            <span class="text-secondary ms-1">‚¨ú</span>
                        {% endif %}
                    </span>
                </li>
            </ul>

            <div class="mb-3">
                {% if note.categories.all %}
                    <div class="mb-2">
                        <span class="fw-semibold">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</span>
                        {% for category in note.categories.all %}
                            <span class="badge bg-info text-dark me-1">
                                {{ category.title }}
                            </span>
                        {% empty %}
                            <span class="text-muted">–ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <p class="card-text mt-3 fs-5">{{ note.text }}</p>

            <div class="d-flex gap-2 mt-4">
                {% if note.author == user or user.is_superuser %}
                <a href="{% url 'notes:update_note' note_id=note.id %}"
                   class="btn btn-sm btn-outline-primary">
                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </a>
                <form method="post" action="{% url 'notes:delete_note' note_id=note.id %}"
                    onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–º–µ—Ç–∫—É?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-sm">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
                {% endif %}
                <a href="{% url 'notes:all_notes' %}" 
                   class="btn btn-sm btn-outline-secondary">
                    ‚Üê –ù–∞–∑–∞–¥ –∫–æ –≤—Å–µ–º –∑–∞–º–µ—Ç–∫–∞–º
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
